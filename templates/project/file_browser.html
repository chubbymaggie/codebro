<script type="text/javascript">
  
function generate_menu(urls) {
  var menu = '<p><a href="'+urls[0]+'&xref=0">Draw graph from this function</a></p>';
  menu += '<p><a href="'+urls[0]+'&xref=1">Draw graph to this function</a></p>';

  if (urls[1].length > 0) {
    menu += '<p><a href="'+urls[1]+'">Jump to declaration</a></p>';
  }

  return menu;
}

function function_menu(id, urls) {
  var off = $('#'+id).offset();
  var d = $('#function_menu');

  if(d[0].style.visibility == 'visible') {
    d[0].style.visibility = 'hidden';
    return;
  }

  d[0].style.visibility = 'visible';
  d.offset( {top: off.top + 20, left: off.left } );

  d[0].innerHTML = generate_menu(urls);
}

</script>

<p> <i class="icon-circle-arrow-right"></i> {{ path }} </p>
{% if is_dir %}
<pre class="prettyprint linenums"><ol>{% for line in lines %}<li><a href="?file={{ path }}/{{ line }}">{{ line }}</a></li>{% endfor %}</ol></pre>
{% else %}

{% if jump_to > 0 %}
<script>
  function gotoanchor() { window.location.hash='line-{{ jump_to }}'; }
  document.onload=gotoanchor();
</script>
{% endif %}

<p> <i class="icon-circle-arrow-up"></i> [<a href="{%url 'browser.views.project_detail' project.id%}?file={{parent_dir}}/">Browse directory</a>] </p>

{# for files, output has been sanitized by pygments #}

{% autoescape off %}
{% for line in lines %}{{ line }}
{% endfor %}
{% endautoescape %}

{% endif %}

<div id="function_menu" style="zIndex:1; visibility: hidden; background-color: white; width: 300px; border:
     1px solid black;"></div>
